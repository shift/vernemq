machine:
  services:
    - docker

dependencies:
  override:
    - docker info
    - cd docker/ubuntu-build; docker build -t ${CIRCLE_USERNAME}/vernemq-build .
    - make docker-build

test:
  override:
    - echo "No tests yet"

deployment:
  hub:
    branch: feature/docker-build
    commands:
      - docker images --all
      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS && docker push ${CIRCLE_USERNAME}/vernemq
